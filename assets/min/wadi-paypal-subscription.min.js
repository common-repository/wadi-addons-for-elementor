/*! For license information please see wadi-paypal-subscription.min.js.LICENSE */
!function(){"use strict";function i(r){var t="https://www.paypal.com/sdk/js";r.sdkBaseURL&&(t=r.sdkBaseURL,delete r.sdkBaseURL),function(t){var e=t["merchant-id"],n=t["data-merchant-id"],r="",o="";Array.isArray(e)?1<e.length?(r="*",o=e.toString()):r=e.toString():"string"==typeof e&&0<e.length?r=e:"string"==typeof n&&0<n.length&&(r="*",o=n);t["merchant-id"]=r,t["data-merchant-id"]=o}(r);var e,n,o=Object.keys(r).filter(function(t){return void 0!==r[t]&&null!==r[t]&&""!==r[t]}).reduce(function(t,e){var n=r[e].toString();return"data-"===e.substring(0,5)?t.dataAttributes[e]=n:t.queryParams[e]=n,t},{queryParams:{},dataAttributes:{}}),i=o.queryParams,o=o.dataAttributes;return{url:"".concat(t,"?").concat((e=i,n="",Object.keys(e).forEach(function(t){0!==n.length&&(n+="&"),n+=t+"="+e[t]}),n)),dataAttributes:o}}function u(t,e){void 0===e&&(e={});var n=document.createElement("script");return n.src=t,Object.keys(e).forEach(function(t){n.setAttribute(t,e[t]),"data-csp-nonce"===t&&n.setAttribute("nonce",e["data-csp-nonce"])}),n}function a(t,e){if(l(t,e=void 0===e?s():e),"undefined"==typeof window)return e.resolve(null);var n=i(t),r=n.url,t=n.dataAttributes,o=t["data-namespace"]||"paypal",n=c(o);return function(t,e){var n=document.querySelector('script[src="'.concat(t,'"]'));if(null!==n){var r=u(t,e),o=n.cloneNode();if(delete o.dataset.uidAuto,Object.keys(o.dataset).length===Object.keys(r.dataset).length){var i=!0;return Object.keys(o.dataset).forEach(function(t){o.dataset[t]!==r.dataset[t]&&(i=!1)}),i&&n}}}(r,t)&&n?e.resolve(n):function(t,e){void 0===e&&(e=s());l(t,e);var a=t.url,c=t.attributes;if("string"!=typeof a||0===a.length)throw new Error("Invalid url.");if(void 0===c||"object"==typeof c)return new e(function(t,n){if("undefined"==typeof window)return t();var e,r,o,i;r=(e={url:a,attributes:c,onSuccess:function(){return t()},onError:function(){var e=new Error('The script "'.concat(a,'" failed to load.'));return window.fetch?fetch(a).then(function(t){return 200===t.status&&n(e),t.text()}).then(function(t){var e=(t=(e=t).split("/* Original Error:")[1])?t.replace(/\n/g,"").replace("*/","").trim():e;n(new Error(e))}).catch(function(t){n(t)}):n(e)}}).url,o=e.attributes,i=e.onSuccess,e=e.onError,(o=u(r,o)).onerror=e,o.onload=i,document.head.insertBefore(o,document.head.firstElementChild)});throw new Error("Expected attributes to be an object.")}({url:r,attributes:t},e).then(function(){var t=c(o);if(t)return t;throw new Error("The window.".concat(o," global variable is not available."))})}function s(){if("undefined"==typeof Promise)throw new Error("Promise is undefined. To resolve the issue, use a Promise polyfill.");return Promise}function c(t){return window[t]}function l(t,e){if("object"!=typeof t||null===t)throw new Error("Expected an options object.");if(void 0!==e&&"function"!=typeof e)throw new Error("Expected PromisePonyfill to be a function.")}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function p(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?e(Object(o),!0).forEach(function(t){var e,n;e=r,t=o[n=t],n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))})}return r}function d(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=h(n);return function(t,e){{if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=h(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var n=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(o,elementorModules.frontend.handlers.Base);var t,e,n,r=b(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return t=o,(e=[{key:"getDefaultSettings",value:function(){return{selectors:{wadiPayPalSubscriptionContainer:".wadi_paypal_subscription_container"}}}},{key:"getDefaultElements",value:function(){var t=this.getSettings("selectors");return{$wadiPayPalSubscriptionContainerElem:this.$element.find(t.wadiPayPalSubscriptionContainer)}}},{key:"bindEvents",value:function(){this.initiate()}},{key:"initiate",value:function(){var t=this.getElementSettings(),t=(elementorFrontend.getCurrentDeviceMode(),this.getSettings("selectors"),{wadiPayPalsubscriptionContainers:document.querySelectorAll(".wadi_paypal_subscription_container"),wadiPayPalsubscriptionContainer:document.querySelector(".wadi_paypal_subscription_container_"+this.$element[0].getAttribute("data-id")),wadiPaypalButtonStyleLayout:t.wadi_paypal_subscription_paypal_buttons_layout||"vertical",wadiPaypalButtonStyleColor:t.wadi_paypal_subscription_paypal_buttons_color||"gold",wadiPaypalButtonStyleShape:t.wadi_paypal_subscription_paypal_buttons_shape||"rect",wadiItemsRepeater:t.wadi_paypal_subscription_preset_amount_to_donate||[]});this.wadiPayPalCheckout(t)}},{key:"wadiPayPalCheckout",value:function(t){var e,n,s;t.wadiPayPalsubscriptionContainers[0].dataset.paypalSettings&&(n=JSON.parse(t.wadiPayPalsubscriptionContainers[0].dataset.paypalSettings).client_id),t.wadiPayPalsubscriptionContainers[0].dataset.paypalSettings&&(s=JSON.parse(t.wadiPayPalsubscriptionContainers[0].dataset.paypalSettings).currency);try{e=a({"client-id":n,currency:s,"disable-funding":"card",intent:"subscription",vault:!0})}catch(t){console.error("failed to load the PayPal JS SDK script",t)}var r=d(t.wadiPayPalsubscriptionContainers),l=this;r&&e.then(function(u){if(u)try{r.forEach(function(n,t){var r,e=JSON.parse(n.dataset.paypalButtonSettings),o=JSON.parse(n.dataset.paypalSettings),i="yes"==e.tagline,a=s||o.widget_currency,c="yes"===o.is_shipping_amount?o.product_shipping_amount:0;"yes"===o.is_subscription_qty&&("radio"==o.subscription_qty_type?n.querySelector(".wadi_radio_buttons").querySelectorAll("label").forEach(function(t,e){var n;t&&t.addEventListener("click",function(t){n=t.target.value,r=n})}):"select"==o.subscription_qty_type?(r=n.querySelector(".wadi_subscription_qty").value,n.querySelector(".wadi_subscription_qty").addEventListener("change",function(t){t=t.target.value;r=t})):"input"==o.subscription_qty_type&&(r=n.querySelector(".wadi_subscription_qty").value,n.querySelector(".wadi_subscription_qty").addEventListener("input",function(t){t=t.target.value;r=t}))),u.Buttons({style:p({layout:e.layout,color:e.color,shape:e.shape,height:e.height,label:e.label},"vertical"!=e.layout&&{tagline:i}),createSubscription:function(t,e){return console.log("subscription data",t),console.log("subscription actions",e),e.subscription.create(p(p({plan_id:o.plan_id,auto_renewal:!0},"yes"==o.is_subscription_qty&&{quantity:r||1}),{},{shipping_amount:{currency_code:a,value:c}}))},onApprove:function(t,e){console.log("Subscription ID: ",t.subscriptionID),l.paymentSuccess(n)}}).render(n.querySelector("#wadi_paypal_subscription_paypal_button"))})}catch(t){console.error("failed to render the PayPal Buttons",t)}})}},{key:"paymentSuccess",value:function(t){var e=document.createElement("div");e.textContent="Subscription Payment was successful.",e.classList.add("wadi_subscription_payment_success","hidden"),t.append(e),e.classList.contains("hidden")&&(e.classList.remove("hidden"),setTimeout(function(){e.classList.add("hidden")},5e3))}}])&&f(t.prototype,e),n&&f(t,n),o}();jQuery(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/wadi-paypal-subscription-addon.default",function(t){elementorFrontend.elementsHandler.addHandler(n,{$element:t})})})}();
//# sourceMappingURL=wadi-paypal-subscription.min.js.map